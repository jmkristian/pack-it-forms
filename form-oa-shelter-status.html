<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="resources/css/loading.css"/>
    <link rel="stylesheet" type="text/css" href="resources/css/pack-it-forms.css"/>
    <style>
      table.shelter-status th {
          border: none;
          white-space: nowrap;
          width: 1px;
          padding-left: 2em;
          padding-right: 0.5em;
          text-align: right;
          font-weight: normal;
      }
      table.shelter-status td {
          border: none;
          padding: 0;
      }
      table.shelter-status th.section-head {
          text-align: left;
          margin-left: 0;
          padding-left: 0;
          padding-top: 1em;
          padding-bottom: 0;
          font-weight: bold;
      }
      table.shelter-status td>label, table.shelter-status th>label {
          display: inline;
          margin-left: 1em;
          margin-right: 0;
          font-weight: normal;
      }
      table.shelter-status td>input {
          display: inline;
      }
      table.shelter-status td input[type="checkbox"] {
          vertical-align: middle;
      }
      form label.label-sameline input {
          margin-left: 0px;
      }
    </style>
    <script type="text/javascript" src="resources/js/pack-it-forms.js"></script>
    <script type="text/javascript" src="resources/integration/integration.js"></script>
    <meta name="pack-it-forms-pdf-URL" content="resources/pdf/XSC_SheltStat_v190328.pdf">
    <meta name="pack-it-forms-subject-suffix" content="_SheltStat_{{field:32.shelter-name}}">
    <script type="text/javascript">
      function compute_availability() {
          var valid_int_value = function(id) {
              var element = document.getElementById(id);
              return (element.value && element.validity && element.validity.valid)
                  ? parseInt(element.value) : null;
          };
          var capacity = valid_int_value("shelter-capacity");
          var occupancy = valid_int_value("shelter-occupancy");
          var newValue = (capacity != null && occupancy != null) ? (capacity - occupancy) : "";
          var availability = document.getElementById("shelter-availability");
          availability.value = newValue;
          if (newValue != "" && newValue < 0) {
              availability.style.setProperty("background-color", "#f8ecec");
          } else {
              availability.style.removeProperty("background-color");
          }
      }
      function valid_float_value(id) {
          var element = document.getElementById(id);
          return (element.value && element.validity && element.validity.valid)
              ? parseFloat(element.value) : null;
      }
      function round_frequency(frequency) {
          return frequency && ((Math.round(frequency * 10000) / 10000) + "");
      }
      function compute_repeater_output() {
          var input = valid_float_value("repeater-input");
          var offset = document.getElementById("repeater-offset")
          if (input && offset.validity && offset.validity.valid) {
              var standard_offset = // MHz
                  (input < 50)  ? 0.1 :
                  (input < 144) ? 0.5 :
                  (input < 220) ? 0.6 :
                  (input < 222) ? 1.0 :
                  (input < 225) ? 1.6 :
                  (input < 450) ? 5.0 :
                  null;
              var value = null;
              offset = offset.value;
              if (!offset) {
                  value = "" + input;
              } else if (offset == "+") {
                  if (standard_offset != null) {
                      value = round_frequency(input + standard_offset);
                  }
              } else if (offset == "-") {
                  if (standard_offset != null) {
                      value = round_frequency(input - standard_offset);
                  }
              } else {
                  value = round_frequency(input + parseFloat(offset));
              }
              var output = document.getElementById("repeater-output");
              if (value && value != output.value) {
                  output.value = value;
                  fireEvent(output, "input");
                  check_the_form_validity();
              }
          }
      }
      function compute_repeater_offset() {
          var input = valid_float_value("repeater-input");
          var output = valid_float_value("repeater-output");
          if (input && output) {
              var value = null;
              if (input == output) {
                  value = "";
              } else {
                  value = round_frequency(output - input);
              }
              var offset = document.getElementById("repeater-offset");
              if (value != null && value != offset.value) {
                  offset.value = value;
                  fireEvent(offset, "input");
                  check_the_form_validity();
              }
          }
      }
    </script>
    <title>Shelter Status</title>
  </head>

  <body>
    <div class="version">1.5</div>
    <div id="loading"><div>Loading<div id="spin"><div id="spin_1" class="spin"></div></div></div></div>
    <div id="err">
      <div>
        <h1>Something went wrong.</h1>
        The following log information may help resolve the problem.
        <div id="error-log"></div>
      </div>
    </div>
    <form id="the-form" name="the-form">
      <div data-include-html="scco-header">
        {
            "header-title": "Santa Clara OA Shelter Status",
            "header-version": "WebEOC: 20130814&lt;br/&gt;PIF: {{version}}"
        }
      </div>
      <br/>
      <table class="same-line-label-layout">
        <tr>
          <th>Report Type:</th>
          <td class="label-sameline" style="width:1px;">
            <label class="label-sameline" style="font-weight:normal;">
              <input name="19.report-type" type="radio" value="Update" required tabindex="19"
                     onchange="on_report_type(false)">Update
            </label>
            <label class="label-sameline" style="font-weight:normal;margin-left:1em;">
              <input name="19.report-type" type="radio" value="Complete" required tabindex="19"
                     onchange="on_report_type(true)">Complete
            </label>
          </td>
          <th style="padding-left:2em;">Shelter Name:</th>
          <td class="label-sameline">
            <input name="32.shelter-name" type="text" required tabindex="29"
                   onchange="document.getElementById('shelter-name-copy').value = this.value"/>
          </td>
        </tr>
      </table>
      <table class="shelter-status" style="margin-left:0;width:99%;">
        <tr>
          <th colspan="2" class="section-head">Shelter<hr/></th>
        </tr><tr>
          <th>Shelter Type:</th>
          <td>
            <select name="30.shelter-type" class="required-for-complete" tabindex="30">
              <option value="" disabled selected hidden style="display:none;"></option>
              <option value="Type 1">Type 1</option>
              <option value="Type 2">Type 2</option>
              <option value="Type 3">Type 3</option>
              <option value="Type 4">Type 4</option>
            </select>
          </td>
        </tr><tr>
          <th>Status:</th>
          <td>
            <select name="31.shelter-status" class="required-for-complete" tabindex="31">
              <option value="" disabled selected hidden style="display:none;"></option>
              <option value="Open" data-background-color="green">Open</option>
              <option value="Closed" data-background-color="red">Closed</option>
              <option value="Full" data-background-color="yellow">Full</option>
            </select>
          </td>
        </tr><tr>
          <th>Name:</th>
          <td><input id="shelter-name-copy" type="text" disabled tabindex="-1"/></td>
        </tr><tr>
          <th>Address:</th>
          <td><input type="text" name="33a.shelter-address" class="required-for-complete" tabindex="33"/></td>
        </tr><tr>
          <th>City:</th>
          <td class="label-sameline">
            <select name="33b.shelter-city" class="required-for-complete" tabindex="34">
              <option value="" disabled selected hidden style="display:none;"></option>
              <option value="Campbell">Campbell</option>
              <option value="Cupertino">Cupertino</option>
              <option value="Gilroy">Gilroy</option>
              <option value="Los Altos">Los Altos</option>
              <option value="Los Altos">Los Altos Hills</option>
              <option value="Los Gatos">Los Gatos</option>
              <option value="Milpitas">Milpitas</option>
              <option value="Morgan Hill">Monte Sereno</option>
              <option value="Morgan Hill">Morgan Hill</option>
              <option value="Mountain View">Mountain View</option>
              <option value="Palo Alto">Palo Alto</option>
              <option value="San Jose">San Jose</option>
              <option value="Santa Clara">Santa Clara</option>
              <option value="Saratoga">Saratoga</option>
              <option value="Sunnyvale">Sunnyvale</option>
              <option value="Unincorporated">Unincorporated Areas</option>
            </select>
            &nbsp;State: <input name="33c.shelter-state" type="text" style="width:2em;" tabindex="35"
                                 class="required-for-complete"/>
            &nbsp; Zip: <input name="33d.shelter-zip" type="text" style="width:8em;" tabindex="36"/>
          </td>
        </tr><tr>
          <th>Latitude:</th>
          <td>
            <input type="text" name="37a.latitude" style="width:8em;" tabindex="37"/>
            <label class="label-sameline">Longitude:
              <input type="text" name="37b.longitude" style="width:8em;" tabindex="38"/>
            </label>
          </td>
        </tr><tr>
          <th colspan="2" class="section-head">Shelter Information<hr/></th>
        </tr><tr>
          <th>Capacity:</th>
          <td>
            <input name="40a.capacity" type="text" class="cardinal-number required-for-complete"
                   id="shelter-capacity" onchange="compute_availability(this)" tabindex="40"/>
        </tr><tr>
          <th>Occupancy:</th>
          <td>
            <input name="40b.occupancy" type="text" class="cardinal-number required-for-complete"
                   id="shelter-occupancy" onchange="compute_availability(this)" tabindex="41"/>
            <label class="label-sameline">Availability:
              <input type="text" class="cardinal-number" id="shelter-availability" tabindex="-1"
                     disabled/>
            </label>
          </td>
        </tr><tr>
          <th>Meals Served (last 24 hours):</th>
          <td><input type="text" class="cardinal-number" name="41.meals" tabindex="42"/></td>
        </tr><tr>
          <th>NSS Number:</th>
          <td><input type="text" name="42.NSS" tabindex="43"/></td>
        </tr><tr>
          <th>Pet Friendly:</th>
          <td class="label-sameline">
            <select name="43a.pet-friendly" style="margin-right:1em;" tabindex="44">
              <option value="" disabled selected hidden style="display:none;"></option>
              <option value="checked">Yes</option>
              <option value="false">No</option>
            </select>
            Basic Safety Inspection:
            <select name="43b.basic-safety" style="margin-right:1em;" tabindex="45">
              <option value="" disabled selected hidden style="display:none;"></option>
              <option value="checked">Yes</option>
              <option value="false">No</option>
            </select>
            ATC 20 Inspection:
            <select name="43c.ATC-20" tabindex="46">
              <option value="" disabled selected hidden style="display:none;"></option>
              <option value="checked">Yes</option>
              <option value="false">No</option>
            </select>
          </td>
        </tr><tr>
          <th>Available Services:</th>
          <td><textarea name="44.available-services" style="height:2em;" tabindex="47"></textarea></td>
        </tr><tr>
          <th>MOU:</th>
          <td><input type="text" name="45.MOU" tabindex="48"
                     placeholder="Identify how submitted"/></td>
        </tr><tr>
          <th>Floor Plan:</th>
          <td><input type="text" name="46.floor-plan" tabindex="49"
                     placeholder="Identify how submitted"/></td>
        </tr><tr>
          <th colspan="2" class="section-head">Contact Information<hr/></th>
        </tr><tr>
          <th>Managed By:</th>
          <td>
            <select name="50a.managed-by" class="required-for-complete" tabindex="50">
              <option value="" disabled selected hidden style="display:none;"></option>
              <option value="American Red Cross">American Red Cross</option>
              <option value="Private">Private</option>
              <option value="Community">Community</option>
              <option value="Government">Government</option>
              <option value="Other">Other</option>
            </select>
          </td>
        </tr><tr>
          <th>Managed By Detail:</th>
          <td><input type="text" name="50b.managed-by-detail" tabindex="51"/></td>
        </tr>
        <tr>
          <th>Primary Contact:</th>
          <td>
            <table class="same-line-label-layout">
              <tr>
                <td><input type="text" name="51a.primary-contact" class="required-for-complete"
                           tabindex="52"/></td>
                <th style="font-weight:normal;">Phone:</th>
                <td><input type="text" name="51b.primary-phone" class="phone-number required-for-complete"
                           tabindex="53"/></td>
              </tr>
            </table>
          </td>
        </tr><tr>
          <th>Secondary Contact:</th>
          <td>
            <table class="same-line-label-layout">
              <tr>
                <td><input type="text" name="52a.secondary-contact" tabindex="54"/></td>
                <th style="font-weight:normal;">Phone:</th>
                <td><input type="text" name="52b.secondary-phone" class="phone-number" tabindex="55"/></td>
              </tr>
            </table>
          </td>
        </tr><tr>
          <th></th>
          <td style="font-weight:bold;padding-top:0.5em;">Amateur Radio Contact Information</td>
        </tr><tr>
          <th>Tactical Call Sign:</th>
          <td><input name="60.tactical-call" type="text" tabindex="60"/></td>
        </tr><tr>
          <th>Repeater Call Sign:</th>
          <td><input name="61.repeater-call" type="text" class="call-sign" tabindex="61"/></td>
        </tr><tr>
          <th>Repeater Input:</th>
          <td>
            <input type="text" name="62a.repeater-input" tabindex="62"
                   class="real-number" style="width:6em;"
                   onchange="compute_repeater_output(this)" id="repeater-input"/> MHz
            <label class="label-sameline">tone:
              <input type="text" name="62b.repeater-input-tone" tabindex="63"
                     class="real-number" style="width:5em;"/> Hz
            </label>
            <label class="label-sameline">Offset:
              <input type="text" name="62c.repeater-offset" tabindex="64"
                     class="real-number" style="width:4em;" pattern="[-+]?([0-9]+(\.[0-9]+)?)?"
                     onchange="compute_repeater_output(this)" id="repeater-offset"/> MHz
            </label>
          </td>
        </tr><tr>
          <th>Repeater Output:</th>
          <td>
            <input type="text" name="63a.repeater-output" tabindex="65"
                   class="real-number" style="width:6em;"
                   onchange="compute_repeater_offset(this)" id="repeater-output"/> MHz
            <label class="label-sameline">tone:
              <input type="text" name="63b.repeater-output-tone" tabindex="66"
                     class="real-number" style="width:5em;"/> Hz
            </label>
          </td>
        </tr><tr>
          <th colspan="2" class="section-head">Comments<hr/></th>
        </tr><tr>
          <th style="vertical-align:top;">Comments:</th>
          <td><textarea name="70.comments" style="height:2em;" tabindex="70"></textarea></td>
        </tr><tr>
          <th></th>
          <td>
            <label class="label-sameline" style="margin-left:0px;font-weight:bold;">
              <input type="checkbox" name="71.remove-from-active-list" tabindex="71">
              Remove from List
            </label>
          </td>
        </tr>
      </table>
      <br/>
      <div data-include-html="scco-footer"></div>
    </form>
    <div data-include-html="submit-buttons"></div>
  </body>
</html>