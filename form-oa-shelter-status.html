<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="resources/css/loading.css"/>
    <link rel="stylesheet" type="text/css" href="resources/css/pack-it-forms.css"/>
    <style>
      table.shelter-status {
          margin-top: 2em;
      }
      table.shelter-status th {
          border: none;
          white-space: nowrap;
          width: 1px;
          padding-left: 2em;
          padding-right: 0.5em;
          text-align: right;
          font-weight: normal;
      }
      table.shelter-status td {
          border: none;
          padding: 0;
      }
      table.shelter-status th.section-head {
          text-align: left;
          margin-left: 0;
          padding-left: 0;
          padding-top: 1em;
          padding-bottom: 0;
          font-weight: bold;
      }
      table.shelter-status td>label, table.shelter-status th>label {
          display: inline;
          margin-left: 1em;
          margin-right: 0;
          font-weight: normal;
      }
      table.shelter-status td>input {
          display: inline;
      }
      table.shelter-status td input[type="checkbox"] {
          vertical-align:middle;
      }
      form label.label-sameline input {
          margin-left: 0px;
      }
    </style>
    <script type="text/javascript" src="resources/js/pack-it-forms.js"></script>
    <script type="text/javascript" src="resources/integration/integration.js"></script>
    <meta name="pack-it-forms-pdf-URL" content="resources/pdf/XSC_OA_ShelterStatus_v20130814.pdf">
    <meta name="pack-it-forms-subject-suffix" content="_Shelter Status_{{field:21.municipality}}">
    <script type="text/javascript">
      var standardEarlyStartup = integration.early_startup;
      integration.early_startup = function(next) {
          standardEarlyStartup(function() {
              select_backgroundColor(
                  document.querySelector('select[name="31.shelter-status"]'),
                  {Open: selectGreen, Full: selectYellow, Closed: selectRed});
              next();
          });
      };
      function compute_availability(element) {
          var capacity = document.getElementById("shelter-capacity").value;
          var occupancy = document.getElementById("shelter-occupancy").value;
          var availability = document.getElementById("shelter-availability");
          if (capacity && occupancy) {
              availability.value = parseInt(capacity) - parseInt(occupancy);
          } else {
              availability.value = "";
          }
      }
      function compute_repeater_output(element) {
          var input = document.getElementById("repeater-input").value;
          var offset = document.getElementById("repeater-offset").value;
          var output = document.getElementById("repeater-output");
          input = parseFloat(input || "0");
          if (input) {
              var standard_offset = // MHz
                  (input < 50)  ? 0.1 :
                  (input < 144) ? 0.5 :
                  (input < 220) ? 0.6 :
                  (input < 222) ? 1.0 :
                  (input < 225) ? 1.6 :
                  (input < 450) ? 5.0 :
                  null;
              var value = null;
              if (!offset) {
                  value = "" + input;
              } else if (!standard_offset) {
                  value = null;
              } else if (offset == "+") {
                  value = "" + (input + standard_offset);
              } else if (offset == "-") {
                  value = "" + (input - standard_offset);
              }
              if (value && value != output.value) {
                  output.value = value;
                  fireEvent(output, "input");
                  check_the_form_validity();
              }
          }
      }
      function compute_repeater_offset(element) {
          var input = document.getElementById("repeater-input").value;
          var output = document.getElementById("repeater-output").value;;
          var offset = document.getElementById("repeater-offset");
          input = parseFloat(input || "0");
          output = parseFloat(output || "0");
          if (input && output) {
              var value = null;
              if (input > output) {
                  value = "-";
              } else if (input < output) {
                  value = "+";
              } else {
                  value = "";
              }
              if (value != null && value != offset.value) {
                  offset.value = value;
                  fireEvent(offset, "input");
                  check_the_form_validity();
              }
          }
      }
    </script>
    <title>Santa Clara OA Shelter Status</title>
  </head>

  <body>
    <div class="version">1.0</div>
    <div id="loading"><div>Loading<div id="spin"><div id="spin_1" class="spin"></div></div></div></div>
    <div id="err">
      <div>
        <h1>Something went wrong.</h1>
        The following log information may help resolve the problem.
        <div id="error-log"></div>
      </div>
    </div>
    <form id="the-form" name="the-form">
      <div data-include-html="scco-header">
        {
            "header-title": "Santa Clara OA Shelter Status",
            "header-version": "PIF {{version}}&lt;br/&gt;WebEOC 20130814",
            "5.": "ROUTINE"
        }
      </div>
      <table class="shelter-status">
        <tr>
          <th style="font-weight:bold;">Incident Name:</th>
          <td>
            <table class="same-line-label-layout">
              <tr>
                <td>
                  <input type="text" name="20.incident-name" required="required" tabindex="20"
                         placeholder="or 'Incident independent'"/>
                </td>
                <th>Municipality:</th>
                <td><div data-include-html="select-municipality"></div></td>
              </tr>
            </table>
          </td>
        </tr><tr>
          <th colspan="2" class="section-head">Shelter<hr/></th>
        </tr><tr>
          <th>Shelter Type:</th>
          <td>
            <select name="30.shelter-type" tabindex="30">
              <option value="Type 1">Type 1</option>
              <option value="Type 2">Type 2</option>
              <option value="Type 3">Type 3</option>
              <option value="Type 4">Type 4</option>
            </select>
          </td>
        </tr><tr>
          <th>Shelter Status:</th>
          <td>
            <select name="31.shelter-status" tabindex="31">
              <option value="Closed">Closed</option>
              <option value="Full">Full</option>
              <option value="Open">Open</option>
            </select>
          </td>
        </tr><tr>
          <th>Name:</th>
          <td><input type="text" name="32.shelter-name" tabindex="32"/></td>
        </tr><tr>
          <th>City:</th>
          <td><input type="text" name="33b.shelter-city" tabindex="33"/></td>
        </tr><tr>
          <th>Address:</th>
          <td><input type="text" name="33a.shelter-address" tabindex="34"/></td>
        </tr><tr>
          <th>Latitude:</th>
          <td>
            <input type="text" name="37a.latitude" style="width:8em;" tabindex="37"/>
            <label class="label-sameline">Longitude:
              <input type="text" name="37b.longitude" style="width:8em;" tabindex="38"/>
            </label>
          </td>
        </tr><tr>
          <th colspan="2" class="section-head">Shelter Information<hr/></th>
        </tr><tr>
          <th>Capacity:</th>
          <td>
            <input type="text" class="cardinal-number" name="40a.capacity" tabindex="40"
                   onchange="compute_availability(this)" id="shelter-capacity"/>
        </tr><tr>
          <th>Occupancy:</th>
          <td>
            <input type="text" class="cardinal-number" name="40b.occupancy" tabindex="41"
                   onchange="compute_availability(this)" id="shelter-occupancy"/>
            <label class="label-sameline">Availability:
              <input type="text" class="cardinal-number" id="shelter-availability" tabindex="-1"
                     disabled="disabled"/>
            </label>
          </td>
        </tr><tr>
          <th>Meals Served (last 24 hours):</th>
          <td><input type="text" class="cardinal-number" name="41.meals" tabindex="42"/></td>
        </tr><tr>
          <th>NSS Number:</th>
          <td><input type="text" name="42.NSS" tabindex="43"/></td>
        </tr><tr>
          <th><label for="pet-friendly">Pet Friendly:</label></th>
          <td>
            <input type="checkbox" name="43a.pet-friendly" id="pet-friendly" tabindex="44"/>
            <label class="label-sameline">Basic Safety Inspection:
              <input type="checkbox" name="43b.basic-safety" tabindex="45"/>
            </label>
            <label class="label-sameline">ATC 20 Inspection:
              <input type="checkbox" name="43c.ATC-20" tabindex="46"/>
            </label>
          </td>
        </tr><tr>
          <th>Available Services:</th>
          <td><textarea name="44.available-services" style="height:2em;" tabindex="47"></textarea></td>
        </tr><tr>
          <th>MOU:</th>
          <td><input type="text" name="45.MOU" tabindex="48"
                     placeholder="Identify how submitted"/></td>
        </tr><tr>
          <th>Floor Plan:</th>
          <td><input type="text" name="46.floor-plan" tabindex="49"
                     placeholder="Identify how submitted"/></td>
        </tr><tr>
          <th colspan="2" class="section-head">Contact Information<hr/></th>
        </tr><tr>
          <th>Managed By:</th>
          <td>
            <select name="50a.managed-by" tabindex="50">
              <option value="American Red Cross">American Red Cross</option>
              <option value="Private">Private</option>
              <option value="Community">Community</option>
              <option value="Government">Government</option>
              <option value="Other">Other</option>
            </select>
          </td>
        </tr><tr>
          <th>Managed By Detail:</th>
          <td><input type="text" name="50b.managed-by-detail" tabindex="51"/></td>
        </tr>
        <tr>
          <th>Primary Contact:</th>
          <td>
            <table class="same-line-label-layout">
              <tr>
                <td><input type="text" name="51a.primary-contact" tabindex="52"/></td>
                <th style="font-weight:normal;">Phone:</th>
                <td><input type="text" name="51b.primary-phone" class="phone-number" tabindex="53"/></td>
              </tr>
            </table>
          </td>
        </tr><tr>
          <th>Secondary Contact:</th>
          <td>
            <table class="same-line-label-layout">
              <tr>
                <td><input type="text" name="52a.secondary-contact" tabindex="54"/></td>
                <th style="font-weight:normal;">Phone:</th>
                <td><input type="text" name="52b.secondary-phone" class="phone-number" tabindex="55"/></td>
              </tr>
            </table>
          </td>
        </tr><tr>
          <th>Secondary Phone:</th>
        </tr><tr>
          <th></th>
          <td style="font-weight:bold;padding-top:0.5em;">Amateur Radio Contact Information</td>
        </tr><tr>
          <th>Tactical Call Sign:</th>
          <td><input type="text" name="60.tactical-call" tabindex="60"/></td>
        </tr><tr>
          <th>Repeater Call Sign:</th>
          <td><input type="text" name="61.repeater-call" class="call-sign" tabindex="61"/></td>
        </tr><tr>
          <th>Repeater Input:</th>
          <td>
            <input type="text" name="62a.repeater-input" tabindex="62"
                   class="real-number" style="width:6em;"
                   onchange="compute_repeater_output(this)" id="repeater-input"/> MHz
            <label class="label-sameline">tone:
              <input type="text" name="62b.repeater-input-tone" tabindex="63"
                     class="real-number" style="width:5em;"/> Hz
            </label>
            <label class="label-sameline">Offset:
              <input type="text" name="62c.repeater-offset" tabindex="64"
                     style="width:1em;" pattern="[+-]"
                     onchange="compute_repeater_output(this)" id="repeater-offset"/>
            </label>
          </td>
        </tr><tr>
          <th>Repeater Output:</th>
          <td>
            <input type="text" name="63a.repeater-output" tabindex="65"
                   class="real-number" style="width:6em;"
                   onchange="compute_repeater_offset(this)" id="repeater-output"/> MHz
            <label class="label-sameline">tone:
              <input type="text" name="63b.repeater-output-tone" tabindex="66"
                     class="real-number" style="width:5em;"/> Hz
            </label>
          </td>
        </tr><tr>
          <th colspan="2" class="section-head">Comments<hr/></th>
        </tr><tr>
          <th style="vertical-align:top;">Comments:</th>
          <td><textarea name="70.comments" style="height:2em;" tabindex="70"></textarea></td>
        </tr><tr>
          <th></th>
          <td>
            <label class="label-sameline" style="margin-left:0px;">
              <input type="checkbox" name="71.remove-from-active-list" tabindex="71">
              Remove from list
            </label>
          </td>
        </tr>
      </table>
      <br/>
      <div data-include-html="scco-footer"></div>
    </form>
    <div data-include-html="submit-buttons"></div>
  </body>
</html>