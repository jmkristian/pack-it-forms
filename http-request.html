<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <script type="text/javascript">
      (function() {
          var url = document.URL;
          url = '/ping' + url.substring(url.lastIndexOf('-'));
          var ping_sequence = 0;
          setInterval(function() {
              var img = new Image();
              // To discourage caching, use a new query string for each ping.
              img.src = url + '?i=' + (ping_sequence++);
              img = undefined;
          }, 30000); // request ping every 30 seconds
      })();
      function encodeForm(s) {
          return encodeURIComponent(s).replace(/%20/g, '+');
      }
      function encodeValues() {
          var result = "";
          var name;
          for (var i = 1; name = document.getElementById('name.' + i); ++i) {
              name = name.value;
              var value = document.getElementById('value.' + i).value;
              if (name && value) {
                  if (result) {
                      result += "&";
                  }
                  result += encodeForm(name) + '=' + encodeForm(value);
              }
          }
          document.getElementById('encoded-values').value = result;
      }
    </script>
    <style>
      table th {
          text-align: right;
          vertical-align: top;
          white-space: nowrap;
          width: 1px;
      }
      table td input[type="text"], table td textarea {
          width: 100%;
      }
    </style>
    <title>HTTP Request</title>
  </head>
  <body>
    <table style="width:95%;">
      <tr>
        <td>name</td>
        <td>value</td>
      </tr><tr>
        <th><input id="name.1"  type="text" style="width:3em;" value="adn"/></th>
        <td><input id="value.1" type="text" value="Enhanced"/></td>
      </tr><tr>
        <th><input id="name.2"  type="text" style="width:3em;" value="sub"/></th>
        <td><input id="value.2" type="text" value="Peas & Carrots"/></td>
      </tr><tr>
        <th><input id="name.3"  type="text" style="width:3em;" value="urg"/></th>
        <td><input id="value.3" type="text" value=""/></td>
      </tr><tr>
        <th><input id="name.4"  type="text" style="width:3em;" value="msg"/></th>
        <td><textarea id="value.4" rows="5" value="true">Thank you for the food.
Please send more peas and carrots.</textarea></td>
      </tr><tr>
        <td><button onclick="encodeValues()">Encode</button></td>
        <td><input id="encoded-values" type="text"/></td>
      </tr>
    </table>
    <br/>
    <br/>
    <form method="post" action="/http-request" target="_blank">
      <table style="width:95%;">
        <tr>
          <th>method:</th>
          <td>
            <select name="method">
              <option value="GET">GET</option>
              <option value="POST" selected>POST</option>
              <option value="PUT">PUT</option>
              <option value="DELETE">DELETE</option>
            </select>
          </td>
        </tr><tr>
          <th>URL:</th>
          <td><input name="URL" type="text" value="http://127.0.0.1:9334/TBD"/></td>
        </tr><tr>
          <th>Content-Type:</th>
          <td><input name="header.Content-Type" type="text" value="application/x-www-form-urlencoded"/></td>
        </tr><tr>
          <th>body:</th>
          <td><textarea name="body" rows="10"></textarea></td>
        </tr><tr>
          <th>timeout:</th>
          <td><input name="timeout" type="text" style="width:3em;" value="3.0"/> sec</td>
        </tr><tr>
          <th></th>
          <td>
            <input type="submit" value="Send Request"/>
            and show the response in a new tab.
          </td>
        </tr>
      </table>
    </form>
  </body>
</html>
